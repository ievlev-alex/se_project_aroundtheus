!function(){"use strict";var e=class{constructor(e,t,s,r,i){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s,this._confirmDeletePopup=r,this._api=i,this._cardId=e._id,this._likes=e.isLiked||!1}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}_handleLikeClick(){(this._likes?this._api.dislikeCard:this._api.likeCard).call(this._api,this._cardId).then((e=>{this._likes=e.isLiked,this._likeButton.classList.toggle("card__like-button_active")})).catch((e=>console.error(e)))}_setEventListeners(){this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._cardImage=this._element.querySelector(".card__image"),this._likeButton.addEventListener("click",(()=>{this._handleLikeClick()})),this._deleteButton.addEventListener("click",(()=>{this._confirmDeletePopup.setData(this),this._confirmDeletePopup.open()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}createCard(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".card__title");return this._cardImage.src=this._link,this._cardImage.alt=this._name,e.textContent=this._name,!0===this._likes&&this._likeButton.classList.add("card__like-button_active"),this._element}remove(){this._element.remove(),this._element=null}},t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputElements=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t?(t.classList.remove(this._errorClass),t.textContent=""):console.warn(`Не найден элемент ошибки для input #${e.id}`)}_hasInvalidInput(){return this._inputElements.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){this._toggleButtonState(),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}disableButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}resetValidation(){this._inputElements.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}},s=class{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popup.addEventListener("click",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}},r=class extends s{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popup.querySelector("form"),this._inputList=this._form.querySelectorAll("input")}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}renderLoading(e){const t=this._popup.querySelector(".modal__button");t&&(t.textContent=e?"Saving...":"Save")}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues()),this._form.reset()}))}};const i=document.querySelector(".profile__edit-button"),n=document.querySelector(".profile__add-button"),a=document.querySelector(".profile__photo-container"),o=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_handleResponse(e){return e.ok?e.json():e.text().then((t=>{throw new Error(`Error: ${e.status} - ${t}`)}))}_handleError(e){return console.error("API Error:",e),Promise.reject(e)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._handleResponse).catch(this._handleError)}updateUserInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse).catch(this._handleError)}updateAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse).catch(this._handleError)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._handleResponse).catch(this._handleError)}createCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse).catch(this._handleError)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleResponse).catch(this._handleError)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._handleResponse).catch(this._handleError)}dislikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._handleResponse).catch(this._handleError)}getAppData(){return Promise.all([this.getUserInfo(),this.getInitialCards()]).catch((e=>(this._handleError(e),Promise.reject(e))))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"660f60ae-1ffb-44a2-ae40-5e62b3aee5a2","Content-Type":"application/json"}});function l(t){return new e(t,"#card-template",((e,t)=>h.open({name:e,link:t})),m,o).createCard()}const h=new class extends s{constructor(e){super(e),this._imageModalPicture=this._popup.querySelector(".modal__image"),this._imageModalTitle=this._popup.querySelector("#image-modal-title")}open(e){this._imageModalPicture.src=e.link,this._imageModalPicture.alt=e.name,this._imageModalTitle.textContent=e.name,super.open()}}("#image-modal"),d=new class{constructor(e){let{nameSelector:t,aboutSelector:s,avatarSelector:r}=e;this._nameElement=document.querySelector(t),this._aboutElement=document.querySelector(s),this._avatarElement=document.querySelector(r)}getUserInfo(){return{name:this._nameElement.textContent,about:this._aboutElement.textContent,avatar:this._avatarElement.src}}setUserAvatar(e){this._avatarElement.src=e}setUserInfo(e){let{name:t,about:s,avatar:r}=e;this._nameElement.textContent=t,this._aboutElement.textContent=s,r&&this.setUserAvatar(r)}}({nameSelector:".profile__title",aboutSelector:".profile__description",avatarSelector:".profile__photo"}),c=new r("#profile-modal",(e=>{c.renderLoading(!0),o.updateUserInfo({name:e.name,about:e.about}).then((e=>{d.setUserInfo(e),c.close()})).catch((e=>{console.error(`Error edit profile: ${e}`)})).finally((()=>{c.renderLoading(!1)}))})),_=new r("#add-modal",(e=>{_.renderLoading(!0),o.createCard({name:e["image-title"],link:e.link}).then((e=>{const t=l(e);p.addItem(t),_.close()})).catch((e=>{console.error(`Error adding card: ${e}`)})).finally((()=>{_.renderLoading(!1)}))})),u=new class extends r{constructor(e,t){super(e,t)}}("#change-modal",(e=>{u.renderLoading(!0),o.updateAvatar({avatar:e.avatar}).then((e=>{d.setUserAvatar(e.avatar),u.close()})).catch((e=>{console.error(`Error changing avatar: ${e}`)})).finally((()=>{u.renderLoading(!1)}))})),m=new class extends s{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popup.querySelector("form")}setData(e){this._card=e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._card),this.close()}))}}("#delete-modal",(function(e){o.deleteCard(e._cardId).then((()=>{e.remove()})).catch((e=>console.error(e)))})),p=new class{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._items,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";e.forEach((e=>{this.addItem(this._renderer(e),t)}))}addItem(e){this._container.prepend(e)}}({items:[],renderer:e=>l(e)},".elements__list");o.getAppData().then((e=>{let[t,s]=e;t?d.setUserInfo(t):console.error("User data not available.");const r=s.find((e=>"Greetings from the server!"===e.name));r?o.deleteCard(r._id).then((()=>{const e=s.filter((e=>e._id!==r._id));p.renderItems(e)})).catch((e=>console.log("Error deleting card:",e))):p.renderItems(s)})).catch((e=>console.error("Failed to load initial data:",e))),i.addEventListener("click",(()=>{c.setInputValues(d.getUserInfo()),E.editForm.resetValidation(),c.open()})),n.addEventListener("click",(()=>{E.cardForm.resetValidation(),_.open()})),a.addEventListener("click",(()=>{u.open()})),_.setEventListeners(),m.setEventListeners(),h.setEventListeners(),c.setEventListeners(),u.setEventListeners();const E={};var v;v={formSelector:".modal__form",inputSelector:".modal__form-textfield",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_inactive",inputErrorClass:"modal__form-textfield-error",errorClass:"modal__error-text-visible"},Array.from(document.querySelectorAll(v.formSelector)).forEach((e=>{const s=new t(v,e),r=e.getAttribute("name");r&&(E[r]=s,s.enableValidation())}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxxQkFBc0IsaUJBQ3RCRSxvQkFBcUIseUJBQ3JCRSxnQkFBaUIsOEJBQ2pCRSxXQUFZLDZCQzhJS0csTUFBTUMsS0FBSy9DLFNBQVNnRCxpQkFBaUJvSSxFQUFPQyxlQUNwRHBILFNBQVNoQyxJQUNoQixNQUFNcUosRUFBWSxJQUFJQyxFQUFjSCxFQUFRbkosR0FDdEN1SixFQUFXdkosRUFBWXdKLGFBQWEsUUFFdENELElBQ0ZMLEVBQWVLLEdBQVlGLEVBQzNCQSxFQUFVbEgsbUJBQ1osRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ2hhbmdlQXZhdGFyLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtRGVsZXRlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2ssIGNvbmZpcm1EZWxldGVQb3B1cCwgYXBpKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9jb25maXJtRGVsZXRlUG9wdXAgPSBjb25maXJtRGVsZXRlUG9wdXA7XG4gICAgdGhpcy5fYXBpID0gYXBpO1xuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5pc0xpa2VkIHx8IGZhbHNlO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfaGFuZGxlTGlrZUNsaWNrKCkge1xuICAgIGNvbnN0IGFwaU1ldGhvZCA9IHRoaXMuX2xpa2VzID8gdGhpcy5fYXBpLmRpc2xpa2VDYXJkIDogdGhpcy5fYXBpLmxpa2VDYXJkO1xuXG4gICAgYXBpTWV0aG9kXG4gICAgICAuY2FsbCh0aGlzLl9hcGksIHRoaXMuX2NhcmRJZClcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgdGhpcy5fbGlrZXMgPSByZXMuaXNMaWtlZDtcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2NvbmZpcm1EZWxldGVQb3B1cC5zZXREYXRhKHRoaXMpO1xuICAgICAgdGhpcy5fY29uZmlybURlbGV0ZVBvcHVwLm9wZW4oKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIGNvbnN0IGNhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIGNhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICBpZiAodGhpcy5fbGlrZXMgPT09IHRydWUpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICByZW1vdmUoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGlmIChlcnJvckVsZW1lbnQpIHtcbiAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKGDQndC1INC90LDQudC00LXQvSDRjdC70LXQvNC10L3RgiDQvtGI0LjQsdC60Lgg0LTQu9GPIGlucHV0ICMke2lucHV0RWxlbWVudC5pZH1gKTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEVsZW1lbnRzLnNvbWUoXG4gICAgICAoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXG4gICAgKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBkaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikgfHxcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhmb3JtRGF0YSkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBmb3JtRGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuICAgIGlmIChzdWJtaXRCdXR0b24pIHtcbiAgICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiLy8gRWxlbWVudHNcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG5dO1xuXG4vLyBET00gZWxlbWVudHNcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGFkZENhcmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5jb25zdCBhdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19waG90by1jb250YWluZXJcIik7XG5cbmNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybS10ZXh0ZmllbGRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2luYWN0aXZlXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9fZm9ybS10ZXh0ZmllbGQtZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3ItdGV4dC12aXNpYmxlXCIsXG59O1xuXG5leHBvcnQge1xuICBpbml0aWFsQ2FyZHMsXG4gIHByb2ZpbGVFZGl0QnRuLFxuICBhZGRDYXJkQnRuLFxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXG4gIGF2YXRhckVsZW1lbnQsXG59O1xuIiwiaW1wb3J0IFwiLi4vc3R5bGVzL2luZGV4LmNzc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybURlbGV0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtRGVsZXRlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ2hhbmdlQXZhdGFyIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENoYW5nZUF2YXRhci5qc1wiO1xuaW1wb3J0IHtcbiAgcHJvZmlsZUVkaXRCdG4sXG4gIGFkZENhcmRCdG4sXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgYXZhdGFyRWxlbWVudCxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI2NjBmNjBhZS0xZmZiLTQ0YTItYWU0MC01ZTYyYjNhZWU1YTJcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICBjYXJkRGF0YSxcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgKG5hbWUsIGxpbmspID0+IGltYWdlUG9wdXAub3Blbih7IG5hbWUsIGxpbmsgfSksXG4gICAgY29uZmlybURlbGV0ZVBvcHVwLFxuICAgIGFwaVxuICApO1xuICByZXR1cm4gY2FyZC5jcmVhdGVDYXJkKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmQoY2FyZCkge1xuICBhcGlcbiAgICAuZGVsZXRlQ2FyZChjYXJkLl9jYXJkSWQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgY2FyZC5yZW1vdmUoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xufVxuLy8gUG9wdXBzXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLW1vZGFsXCIpO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgYWJvdXRTZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcbiAgYXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3Bob3RvXCIsXG59KTtcblxuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZS1tb2RhbFwiLCAoZm9ybURhdGEpID0+IHtcbiAgcHJvZmlsZVBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIGFwaVxuICAgIC51cGRhdGVVc2VySW5mbyh7XG4gICAgICBuYW1lOiBmb3JtRGF0YVtcIm5hbWVcIl0sXG4gICAgICBhYm91dDogZm9ybURhdGFbXCJhYm91dFwiXSxcbiAgICB9KVxuICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xuICAgICAgcHJvZmlsZVBvcHVwLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZWRpdCBwcm9maWxlOiAke2Vycn1gKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHByb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbn0pO1xuXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtbW9kYWxcIiwgKGZvcm1EYXRhKSA9PiB7XG4gIGFkZENhcmRQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGlcbiAgICAuY3JlYXRlQ2FyZCh7XG4gICAgICBuYW1lOiBmb3JtRGF0YVtcImltYWdlLXRpdGxlXCJdLFxuICAgICAgbGluazogZm9ybURhdGFbXCJsaW5rXCJdLFxuICAgIH0pXG4gICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBhZGRpbmcgY2FyZDogJHtlcnJ9YCk7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhZGRDYXJkUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG59KTtcblxuY29uc3QgYXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ2hhbmdlQXZhdGFyKFwiI2NoYW5nZS1tb2RhbFwiLCAoZm9ybURhdGEpID0+IHtcbiAgYXZhdGFyUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgYXBpXG4gICAgLnVwZGF0ZUF2YXRhcih7XG4gICAgICBhdmF0YXI6IGZvcm1EYXRhLmF2YXRhcixcbiAgICB9KVxuXG4gICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XG4gICAgICBhdmF0YXJQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNoYW5naW5nIGF2YXRhcjogJHtlcnJ9YCk7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhdmF0YXJQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbn0pO1xuXG5jb25zdCBjb25maXJtRGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybURlbGV0ZShcbiAgXCIjZGVsZXRlLW1vZGFsXCIsXG4gIGhhbmRsZURlbGV0ZUNhcmRcbik7XG5cbi8vIFNlY3Rpb25cbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogW10sXG4gICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xuICAgICAgcmV0dXJuIGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmVsZW1lbnRzX19saXN0XCJcbik7XG5cbmFwaVxuICAuZ2V0QXBwRGF0YSgpXG4gIC50aGVuKChbdXNlciwgY2FyZHNdKSA9PiB7XG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiVXNlciBkYXRhIG5vdCBhdmFpbGFibGUuXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGdyZWV0aW5nQ2FyZCA9IGNhcmRzLmZpbmQoXG4gICAgICAoY2FyZCkgPT4gY2FyZC5uYW1lID09PSBcIkdyZWV0aW5ncyBmcm9tIHRoZSBzZXJ2ZXIhXCJcbiAgICApO1xuICAgIGlmIChncmVldGluZ0NhcmQpIHtcbiAgICAgIGFwaVxuICAgICAgICAuZGVsZXRlQ2FyZChncmVldGluZ0NhcmQuX2lkKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVtYWluaW5nQ2FyZHMgPSBjYXJkcy5maWx0ZXIoXG4gICAgICAgICAgICAoY2FyZCkgPT4gY2FyZC5faWQgIT09IGdyZWV0aW5nQ2FyZC5faWRcbiAgICAgICAgICApO1xuICAgICAgICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKHJlbWFpbmluZ0NhcmRzKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKFwiRXJyb3IgZGVsZXRpbmcgY2FyZDpcIiwgZXJyKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKGNhcmRzKTtcbiAgICB9XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGxvYWQgaW5pdGlhbCBkYXRhOlwiLCBlcnIpKTtcblxuLy8gRXZlbnQgbGlzdGVuZXJzXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwcm9maWxlUG9wdXAuc2V0SW5wdXRWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSk7XG4gIGZvcm1WYWxpZGF0b3JzW1wiZWRpdEZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XG59KTtcblxuYWRkQ2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1tcImNhcmRGb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xuICBhZGRDYXJkUG9wdXAub3BlbigpO1xufSk7XG5cbmF2YXRhckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYXZhdGFyUG9wdXAub3BlbigpO1xufSk7XG5cbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuY29uZmlybURlbGV0ZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIFZhbGlkYXRpb25cbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG5cbiAgICBpZiAoZm9ybU5hbWUpIHtcbiAgICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gICAgfVxuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvblNldHRpbmdzKTtcbiIsImNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiByZXMudGV4dCgpLnRoZW4oKHRleHQpID0+IHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3I6ICR7cmVzLnN0YXR1c30gLSAke3RleHR9YCk7XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlRXJyb3IoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQVBJIEVycm9yOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICAgICAgLmNhdGNoKHRoaXMuX2hhbmRsZUVycm9yKTtcbiAgfVxuXG4gIHVwZGF0ZVVzZXJJbmZvKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gICAgICAuY2F0Y2godGhpcy5faGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgdXBkYXRlQXZhdGFyKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICAgICAgLmNhdGNoKHRoaXMuX2hhbmRsZUVycm9yKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XG4gIH1cbiAgY3JlYXRlQ2FyZChkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gICAgICAuY2F0Y2godGhpcy5faGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gICAgICAuY2F0Y2godGhpcy5faGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICAgICAgLmNhdGNoKHRoaXMuX2hhbmRsZUVycm9yKTtcbiAgfVxuXG4gIGRpc2xpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XG4gIH1cblxuICBnZXRBcHBEYXRhKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRVc2VySW5mbygpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpXSkuY2F0Y2goXG4gICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgICk7XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEFwaTtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlTW9kYWxQaWN0dXJlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5faW1hZ2VNb2RhbFRpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1tb2RhbC10aXRsZVwiKTtcbiAgfVxuXG4gIG9wZW4oZm9ybURhdGEpIHtcbiAgICB0aGlzLl9pbWFnZU1vZGFsUGljdHVyZS5zcmMgPSBmb3JtRGF0YS5saW5rO1xuICAgIHRoaXMuX2ltYWdlTW9kYWxQaWN0dXJlLmFsdCA9IGZvcm1EYXRhLm5hbWU7XG4gICAgdGhpcy5faW1hZ2VNb2RhbFRpdGxlLnRleHRDb250ZW50ID0gZm9ybURhdGEubmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iLCJjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWJvdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXRFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckF2YXRhcihhdmF0YXJVcmwpIHtcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyA9IGF2YXRhclVybDtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2Fib3V0RWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0O1xuICAgIGlmIChhdmF0YXIpIHtcbiAgICAgIHRoaXMuc2V0VXNlckF2YXRhcihhdmF0YXIpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcbiIsImltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuL1BvcHVwV2l0aEZvcm0uanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoQ2hhbmdlQXZhdGFyIGV4dGVuZHMgUG9wdXBXaXRoRm9ybSB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCk7XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aENoYW5nZUF2YXRhcjtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhDb25maXJtRGVsZXRlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuICB9XG5cbiAgc2V0RGF0YShjYXJkKSB7XG4gICAgdGhpcy5fY2FyZCA9IGNhcmQ7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQodGhpcy5fY2FyZCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoQ29uZmlybURlbGV0ZTtcbiIsImNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGl0ZW1zID0gdGhpcy5faXRlbXMsIHBvc2l0aW9uID0gXCJhcHBlbmRcIikge1xuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuYWRkSXRlbSh0aGlzLl9yZW5kZXJlcihpdGVtKSwgcG9zaXRpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiY29uZmlybURlbGV0ZVBvcHVwIiwiYXBpIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9jb25maXJtRGVsZXRlUG9wdXAiLCJfYXBpIiwiX2NhcmRJZCIsIl9pZCIsIl9saWtlcyIsImlzTGlrZWQiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJfaGFuZGxlTGlrZUNsaWNrIiwiZGlzbGlrZUNhcmQiLCJsaWtlQ2FyZCIsImNhbGwiLCJ0aGVuIiwicmVzIiwiX2xpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9lbGVtZW50IiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkSW1hZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0RGF0YSIsIm9wZW4iLCJjcmVhdGVDYXJkIiwiY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJhZGQiLCJyZW1vdmUiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfaW5wdXRFbGVtZW50cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJ3YXJuIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZGlzYWJsZUJ1dHRvbiIsInJlbW92ZUF0dHJpYnV0ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJmb3JFYWNoIiwiZGlzYWJsZWQiLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwIiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlU3VibWl0IiwiX2lucHV0TGlzdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwiZm9ybURhdGEiLCJyZW5kZXJMb2FkaW5nIiwiaXNMb2FkaW5nIiwic3VibWl0QnV0dG9uIiwicmVzZXQiLCJwcm9maWxlRWRpdEJ0biIsImFkZENhcmRCdG4iLCJhdmF0YXJFbGVtZW50Iiwib3B0aW9ucyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsIl9oYW5kbGVSZXNwb25zZSIsIm9rIiwianNvbiIsInRleHQiLCJFcnJvciIsInN0YXR1cyIsIl9oYW5kbGVFcnJvciIsIlByb21pc2UiLCJyZWplY3QiLCJnZXRVc2VySW5mbyIsImZldGNoIiwidXBkYXRlVXNlckluZm8iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZUF2YXRhciIsImdldEluaXRpYWxDYXJkcyIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJnZXRBcHBEYXRhIiwiYWxsIiwiYXV0aG9yaXphdGlvbiIsImNhcmREYXRhIiwiQ2FyZCIsImltYWdlUG9wdXAiLCJfaW1hZ2VNb2RhbFBpY3R1cmUiLCJfaW1hZ2VNb2RhbFRpdGxlIiwidXNlckluZm8iLCJfcmVmIiwibmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2Fib3V0RWxlbWVudCIsIl9hdmF0YXJFbGVtZW50IiwiYWJvdXQiLCJhdmF0YXIiLCJzZXRVc2VyQXZhdGFyIiwiYXZhdGFyVXJsIiwic2V0VXNlckluZm8iLCJfcmVmMiIsInByb2ZpbGVQb3B1cCIsIlBvcHVwV2l0aEZvcm0iLCJ1c2VyRGF0YSIsImZpbmFsbHkiLCJhZGRDYXJkUG9wdXAiLCJjYXJkRWxlbWVudCIsImNhcmRTZWN0aW9uIiwiYWRkSXRlbSIsImF2YXRhclBvcHVwIiwiY2FyZCIsIl9jYXJkIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwicG9zaXRpb24iLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJ1c2VyIiwiY2FyZHMiLCJncmVldGluZ0NhcmQiLCJmaW5kIiwicmVtYWluaW5nQ2FyZHMiLCJmaWx0ZXIiLCJsb2ciLCJmb3JtVmFsaWRhdG9ycyIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsInZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSJdLCJzb3VyY2VSb290IjoiIn0=