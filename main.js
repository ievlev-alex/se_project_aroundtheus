!function(){"use strict";var e=class{constructor(e,t,s,r,i){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s,this._confirmDeletePopup=r,this._api=i,this._cardId=e._id,this._likes=e.isLiked||!1}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}_handleLikeClick(){(this._likes?this._api.dislikeCard:this._api.likeCard).call(this._api,this._cardId).then((e=>{this._likes=e.isLiked,this._likeButton.classList.toggle("card__like-button_active")})).catch((e=>console.error(e)))}_setEventListeners(){this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._cardImage=this._element.querySelector(".card__image"),this._likeButton.addEventListener("click",(()=>{this._handleLikeClick()})),this._deleteButton.addEventListener("click",(()=>{this._confirmDeletePopup.setData(this),this._confirmDeletePopup.open()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}createCard(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".card__title");return this._cardImage.src=this._link,this._cardImage.alt=this._name,e.textContent=this._name,!0===this._likes&&this._likeButton.classList.add("card__like-button_active"),this._element}remove(){this._element.remove(),this._element=null}},t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputElements=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t?(t.classList.remove(this._errorClass),t.textContent=""):console.warn(`Не найден элемент ошибки для input #${e.id}`)}_hasInvalidInput(){return this._inputElements.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){this._toggleButtonState(),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}disableButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}resetValidation(){this._inputElements.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}},s=class{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}renderLoading(e){const t=this._popup.querySelector(".modal__button");t&&(t.textContent=e?"Saving...":"Save")}setEventListeners(){this._popup.addEventListener("click",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}},r=class extends s{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popup.querySelector("form"),this._inputList=this._form.querySelectorAll("input")}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues()),this._form.reset()}))}};const i=document.querySelector(".profile__edit-button"),n=document.querySelector(".profile__add-button"),a=document.querySelector(".profile__photo-container"),o=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_handleResponse(e){return e.ok?e.json():e.text().then((t=>{throw new Error(`Error: ${e.status} - ${t}`)}))}_handleError(e){return console.error("API Error:",e),Promise.reject(e)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._handleResponse).catch(this._handleError)}updateUserInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse).catch(this._handleError)}updateAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse).catch(this._handleError)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._handleResponse).catch(this._handleError)}createCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse).catch(this._handleError)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleResponse).catch(this._handleError)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._handleResponse).catch(this._handleError)}dislikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._handleResponse).catch(this._handleError)}getAppData(){return Promise.all([this.getUserInfo(),this.getInitialCards()]).catch((e=>(this._handleError(e),Promise.reject(e))))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"660f60ae-1ffb-44a2-ae40-5e62b3aee5a2","Content-Type":"application/json"}});function l(t){return new e(t,"#card-template",((e,t)=>h.open({name:e,link:t})),m,o).createCard()}const h=new class extends s{constructor(e){super(e),this._imageModalPicture=this._popup.querySelector(".modal__image"),this._imageModalTitle=this._popup.querySelector("#image-modal-title")}open(e){this._imageModalPicture.src=e.link,this._imageModalPicture.alt=e.name,this._imageModalTitle.textContent=e.name,super.open()}}("#image-modal"),d=new class{constructor(e){let{nameSelector:t,aboutSelector:s,avatarSelector:r}=e;this._nameElement=document.querySelector(t),this._aboutElement=document.querySelector(s),this._avatarElement=document.querySelector(r)}getUserInfo(){return{name:this._nameElement.textContent,about:this._aboutElement.textContent,avatar:this._avatarElement.src}}setUserAvatar(e){this._avatarElement.src=e}setUserInfo(e){let{name:t,about:s,avatar:r}=e;this._nameElement.textContent=t,this._aboutElement.textContent=s,r&&this.setUserAvatar(r)}}({nameSelector:".profile__title",aboutSelector:".profile__description",avatarSelector:".profile__photo"}),c=new r("#profile-modal",(e=>{c.renderLoading(!0),o.updateUserInfo({name:e.name,about:e.about}).then((e=>{d.setUserInfo(e),c.close()})).catch((e=>{console.error(`Error edit profile: ${e}`)})).finally((()=>{c.renderLoading(!1)}))})),_=new r("#add-modal",(e=>{_.renderLoading(!0),o.createCard({name:e["image-title"],link:e.link}).then((e=>{const t=l(e);p.addItem(t),_.close()})).catch((e=>{console.error(`Error adding card: ${e}`)})).finally((()=>{_.renderLoading(!1)}))})),u=new class extends r{constructor(e,t){super(e,t)}}("#change-modal",(e=>{u.renderLoading(!0),o.updateAvatar({avatar:e.avatar}).then((e=>{d.setUserAvatar(e.avatar),u.close()})).catch((e=>{console.error(`Error changing avatar: ${e}`)})).finally((()=>{u.renderLoading(!1)}))})),m=new class extends s{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popup.querySelector("form")}setData(e){this._card=e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._card),this.close()}))}}("#delete-modal",(function(e){o.deleteCard(e._cardId).then((()=>{e.remove()})).catch((e=>console.error(e)))})),p=new class{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._items,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";e.forEach((e=>{this.addItem(this._renderer(e),t)}))}addItem(e){this._container.prepend(e)}}({items:[],renderer:e=>l(e)},".elements__list");o.getAppData().then((e=>{let[t,s]=e;t?d.setUserInfo(t):console.error("User data not available.");const r=s.find((e=>"Greetings from the server!"===e.name));r?o.deleteCard(r._id).then((()=>{const e=s.filter((e=>e._id!==r._id));p.renderItems(e)})).catch((e=>console.log("Error deleting card:",e))):p.renderItems(s)})).catch((e=>console.error("Failed to load initial data:",e))),i.addEventListener("click",(()=>{c.setInputValues(d.getUserInfo()),E.editForm.resetValidation(),c.open()})),n.addEventListener("click",(()=>{E.cardForm.resetValidation(),_.open()})),a.addEventListener("click",(()=>{u.open()})),_.setEventListeners(),m.setEventListeners(),h.setEventListeners(),c.setEventListeners(),u.setEventListeners();const E={};var v;v={formSelector:".modal__form",inputSelector:".modal__form-textfield",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_inactive",inputErrorClass:"modal__form-textfield-error",errorClass:"modal__error-text-visible"},Array.from(document.querySelectorAll(v.formSelector)).forEach((e=>{const s=new t(v,e),r=e.getAttribute("name");r&&(E[r]=s,s.enableValidation())}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eUJBQ2ZFLHFCQUFzQixpQkFDdEJFLG9CQUFxQix5QkFDckJFLGdCQUFpQiw4QkFDakJFLFdBQVksNkJDOElLRyxNQUFNQyxLQUFLL0MsU0FBU2dELGlCQUFpQm9JLEVBQU9DLGVBQ3BEcEgsU0FBU2hDLElBQ2hCLE1BQU1xSixFQUFZLElBQUlDLEVBQWNILEVBQVFuSixHQUN0Q3VKLEVBQVd2SixFQUFZd0osYUFBYSxRQUV0Q0QsSUFDRkwsRUFBZUssR0FBWUYsRUFDM0JBLEVBQVVsSCxtQkFDWixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDaGFuZ2VBdmF0YXIuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1EZWxldGUuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaywgY29uZmlybURlbGV0ZVBvcHVwLCBhcGkpIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICAgIHRoaXMuX2NvbmZpcm1EZWxldGVQb3B1cCA9IGNvbmZpcm1EZWxldGVQb3B1cDtcbiAgICB0aGlzLl9hcGkgPSBhcGk7XG4gICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmlzTGlrZWQgfHwgZmFsc2U7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQ2xpY2soKSB7XG4gICAgY29uc3QgYXBpTWV0aG9kID0gdGhpcy5fbGlrZXMgPyB0aGlzLl9hcGkuZGlzbGlrZUNhcmQgOiB0aGlzLl9hcGkubGlrZUNhcmQ7XG5cbiAgICBhcGlNZXRob2RcbiAgICAgIC5jYWxsKHRoaXMuX2FwaSwgdGhpcy5fY2FyZElkKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICB0aGlzLl9saWtlcyA9IHJlcy5pc0xpa2VkO1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG5cbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2soKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fY29uZmlybURlbGV0ZVBvcHVwLnNldERhdGEodGhpcyk7XG4gICAgICB0aGlzLl9jb25maXJtRGVsZXRlUG9wdXAub3BlbigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xuICAgIH0pO1xuICB9XG5cbiAgY3JlYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgY29uc3QgY2FyZFRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIGlmICh0aGlzLl9saWtlcyA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIHJlbW92ZSgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgaWYgKGVycm9yRWxlbWVudCkge1xuICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oYNCd0LUg0L3QsNC50LTQtdC9INGN0LvQtdC80LXQvdGCINC+0YjQuNCx0LrQuCDQtNC70Y8gaW5wdXQgIyR7aW5wdXRFbGVtZW50LmlkfWApO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0RWxlbWVudHMuc29tZShcbiAgICAgIChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcbiAgICApO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgfVxuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGRpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcbiAgICBpZiAoc3VibWl0QnV0dG9uKSB7XG4gICAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSB8fFxuICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzKGZvcm1EYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGZvcm1EYXRhW2lucHV0Lm5hbWVdO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XG4iLCIvLyBFbGVtZW50c1xuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbl07XG5cbi8vIERPTSBlbGVtZW50c1xuY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuY29uc3QgYWRkQ2FyZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IGF2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3Bob3RvLWNvbnRhaW5lclwiKTtcblxuY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLXRleHRmaWVsZFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25faW5hY3RpdmVcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19mb3JtLXRleHRmaWVsZC1lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvci10ZXh0LXZpc2libGVcIixcbn07XG5cbmV4cG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgcHJvZmlsZUVkaXRCdG4sXG4gIGFkZENhcmRCdG4sXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgYXZhdGFyRWxlbWVudCxcbn07XG4iLCJpbXBvcnQgXCIuLi9zdHlsZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtRGVsZXRlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1EZWxldGUuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDaGFuZ2VBdmF0YXIgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ2hhbmdlQXZhdGFyLmpzXCI7XG5pbXBvcnQge1xuICBwcm9maWxlRWRpdEJ0bixcbiAgYWRkQ2FyZEJ0bixcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBhdmF0YXJFbGVtZW50LFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjY2MGY2MGFlLTFmZmItNDRhMi1hZTQwLTVlNjJiM2FlZTVhMlwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGNhcmREYXRhLFxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgICAobmFtZSwgbGluaykgPT4gaW1hZ2VQb3B1cC5vcGVuKHsgbmFtZSwgbGluayB9KSxcbiAgICBjb25maXJtRGVsZXRlUG9wdXAsXG4gICAgYXBpXG4gICk7XG4gIHJldHVybiBjYXJkLmNyZWF0ZUNhcmQoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZChjYXJkKSB7XG4gIGFwaVxuICAgIC5kZWxldGVDYXJkKGNhcmQuX2NhcmRJZClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBjYXJkLnJlbW92ZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG59XG4vLyBQb3B1cHNcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1hZ2UtbW9kYWxcIik7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxuICBhYm91dFNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxuICBhdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9fcGhvdG9cIixcbn0pO1xuXG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLW1vZGFsXCIsIChmb3JtRGF0YSkgPT4ge1xuICBwcm9maWxlUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgYXBpXG4gICAgLnVwZGF0ZVVzZXJJbmZvKHtcbiAgICAgIG5hbWU6IGZvcm1EYXRhW1wibmFtZVwiXSxcbiAgICAgIGFib3V0OiBmb3JtRGF0YVtcImFib3V0XCJdLFxuICAgIH0pXG4gICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XG4gICAgICBwcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBlZGl0IHByb2ZpbGU6ICR7ZXJyfWApO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcHJvZmlsZVBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH0pO1xufSk7XG5cbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2FkZC1tb2RhbFwiLCAoZm9ybURhdGEpID0+IHtcbiAgYWRkQ2FyZFBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIGFwaVxuICAgIC5jcmVhdGVDYXJkKHtcbiAgICAgIG5hbWU6IGZvcm1EYXRhW1wiaW1hZ2UtdGl0bGVcIl0sXG4gICAgICBsaW5rOiBmb3JtRGF0YVtcImxpbmtcIl0sXG4gICAgfSlcbiAgICAudGhlbigoY2FyZERhdGEpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICAgIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFkZGluZyBjYXJkOiAke2Vycn1gKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGFkZENhcmRQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbn0pO1xuXG5jb25zdCBhdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhDaGFuZ2VBdmF0YXIoXCIjY2hhbmdlLW1vZGFsXCIsIChmb3JtRGF0YSkgPT4ge1xuICBhdmF0YXJQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGlcbiAgICAudXBkYXRlQXZhdGFyKHtcbiAgICAgIGF2YXRhcjogZm9ybURhdGEuYXZhdGFyLFxuICAgIH0pXG5cbiAgICAudGhlbigodXNlckRhdGEpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIodXNlckRhdGEuYXZhdGFyKTtcbiAgICAgIGF2YXRhclBvcHVwLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgY2hhbmdpbmcgYXZhdGFyOiAke2Vycn1gKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGF2YXRhclBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH0pO1xufSk7XG5cbmNvbnN0IGNvbmZpcm1EZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtRGVsZXRlKFxuICBcIiNkZWxldGUtbW9kYWxcIixcbiAgaGFuZGxlRGVsZXRlQ2FyZFxuKTtcblxuLy8gU2VjdGlvblxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBbXSxcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XG4gICAgICByZXR1cm4gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gICAgfSxcbiAgfSxcbiAgXCIuZWxlbWVudHNfX2xpc3RcIlxuKTtcblxuYXBpXG4gIC5nZXRBcHBEYXRhKClcbiAgLnRoZW4oKFt1c2VyLCBjYXJkc10pID0+IHtcbiAgICBpZiAodXNlcikge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJVc2VyIGRhdGEgbm90IGF2YWlsYWJsZS5cIik7XG4gICAgfVxuXG4gICAgY29uc3QgZ3JlZXRpbmdDYXJkID0gY2FyZHMuZmluZChcbiAgICAgIChjYXJkKSA9PiBjYXJkLm5hbWUgPT09IFwiR3JlZXRpbmdzIGZyb20gdGhlIHNlcnZlciFcIlxuICAgICk7XG4gICAgaWYgKGdyZWV0aW5nQ2FyZCkge1xuICAgICAgYXBpXG4gICAgICAgIC5kZWxldGVDYXJkKGdyZWV0aW5nQ2FyZC5faWQpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICBjb25zdCByZW1haW5pbmdDYXJkcyA9IGNhcmRzLmZpbHRlcihcbiAgICAgICAgICAgIChjYXJkKSA9PiBjYXJkLl9pZCAhPT0gZ3JlZXRpbmdDYXJkLl9pZFxuICAgICAgICAgICk7XG4gICAgICAgICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMocmVtYWluaW5nQ2FyZHMpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coXCJFcnJvciBkZWxldGluZyBjYXJkOlwiLCBlcnIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoY2FyZHMpO1xuICAgIH1cbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9hZCBpbml0aWFsIGRhdGE6XCIsIGVycikpO1xuXG4vLyBFdmVudCBsaXN0ZW5lcnNcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHByb2ZpbGVQb3B1cC5zZXRJbnB1dFZhbHVlcyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcbiAgZm9ybVZhbGlkYXRvcnNbXCJlZGl0Rm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgcHJvZmlsZVBvcHVwLm9wZW4oKTtcbn0pO1xuXG5hZGRDYXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzW1wiY2FyZEZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XG59KTtcblxuYXZhdGFyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhdmF0YXJQb3B1cC5vcGVuKCk7XG59KTtcblxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jb25maXJtRGVsZXRlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuYXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gVmFsaWRhdGlvblxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcblxuICAgIGlmIChmb3JtTmFtZSkge1xuICAgICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgICB9XG4gIH0pO1xufTtcblxuZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0aW9uU2V0dGluZ3MpO1xuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gIF9oYW5kbGVSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcy50ZXh0KCkudGhlbigodGV4dCkgPT4ge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvcjogJHtyZXMuc3RhdHVzfSAtICR7dGV4dH1gKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVFcnJvcihlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJBUEkgRXJyb3I6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gICAgICAuY2F0Y2godGhpcy5faGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgdXBkYXRlVXNlckluZm8oZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XG4gIH1cblxuICB1cGRhdGVBdmF0YXIoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gICAgICAuY2F0Y2godGhpcy5faGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICAgICAgLmNhdGNoKHRoaXMuX2hhbmRsZUVycm9yKTtcbiAgfVxuICBjcmVhdGVDYXJkKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XG4gIH1cblxuICBsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gICAgICAuY2F0Y2godGhpcy5faGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgZGlzbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICAgICAgLmNhdGNoKHRoaXMuX2hhbmRsZUVycm9yKTtcbiAgfVxuXG4gIGdldEFwcERhdGEoKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKS5jYXRjaChcbiAgICAgIChlcnJvcikgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgKTtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faW1hZ2VNb2RhbFBpY3R1cmUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbiAgICB0aGlzLl9pbWFnZU1vZGFsVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLW1vZGFsLXRpdGxlXCIpO1xuICB9XG5cbiAgb3Blbihmb3JtRGF0YSkge1xuICAgIHRoaXMuX2ltYWdlTW9kYWxQaWN0dXJlLnNyYyA9IGZvcm1EYXRhLmxpbms7XG4gICAgdGhpcy5faW1hZ2VNb2RhbFBpY3R1cmUuYWx0ID0gZm9ybURhdGEubmFtZTtcbiAgICB0aGlzLl9pbWFnZU1vZGFsVGl0bGUudGV4dENvbnRlbnQgPSBmb3JtRGF0YS5uYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTtcbiIsImNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGFib3V0U2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9hYm91dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl9hYm91dEVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBhdmF0YXI6IHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjLFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKGF2YXRhclVybCkge1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyVXJsO1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fYWJvdXRFbGVtZW50LnRleHRDb250ZW50ID0gYWJvdXQ7XG4gICAgaWYgKGF2YXRhcikge1xuICAgICAgdGhpcy5zZXRVc2VyQXZhdGFyKGF2YXRhcik7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vUG9wdXBXaXRoRm9ybS5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhDaGFuZ2VBdmF0YXIgZXh0ZW5kcyBQb3B1cFdpdGhGb3JtIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KTtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoQ2hhbmdlQXZhdGFyO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aENvbmZpcm1EZWxldGUgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XG4gIH1cblxuICBzZXREYXRhKGNhcmQpIHtcbiAgICB0aGlzLl9jYXJkID0gY2FyZDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9jYXJkKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhDb25maXJtRGVsZXRlO1xuIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoaXRlbXMgPSB0aGlzLl9pdGVtcywgcG9zaXRpb24gPSBcImFwcGVuZFwiKSB7XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5hZGRJdGVtKHRoaXMuX3JlbmRlcmVyKGl0ZW0pLCBwb3NpdGlvbik7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJjb25maXJtRGVsZXRlUG9wdXAiLCJhcGkiLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NvbmZpcm1EZWxldGVQb3B1cCIsIl9hcGkiLCJfY2FyZElkIiwiX2lkIiwiX2xpa2VzIiwiaXNMaWtlZCIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsIl9oYW5kbGVMaWtlQ2xpY2siLCJkaXNsaWtlQ2FyZCIsImxpa2VDYXJkIiwiY2FsbCIsInRoZW4iLCJyZXMiLCJfbGlrZUJ1dHRvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2VsZW1lbnQiLCJfZGVsZXRlQnV0dG9uIiwiX2NhcmRJbWFnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXREYXRhIiwib3BlbiIsImNyZWF0ZUNhcmQiLCJjYXJkVGl0bGUiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsImFkZCIsInJlbW92ZSIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9pbnB1dEVsZW1lbnRzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIndhcm4iLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJkaXNhYmxlQnV0dG9uIiwicmVtb3ZlQXR0cmlidXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImZvckVhY2giLCJkaXNhYmxlZCIsInJlc2V0VmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXkiLCJyZW5kZXJMb2FkaW5nIiwiaXNMb2FkaW5nIiwic3VibWl0QnV0dG9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwIiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlU3VibWl0IiwiX2lucHV0TGlzdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwiZm9ybURhdGEiLCJyZXNldCIsInByb2ZpbGVFZGl0QnRuIiwiYWRkQ2FyZEJ0biIsImF2YXRhckVsZW1lbnQiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX2hhbmRsZVJlc3BvbnNlIiwib2siLCJqc29uIiwidGV4dCIsIkVycm9yIiwic3RhdHVzIiwiX2hhbmRsZUVycm9yIiwiUHJvbWlzZSIsInJlamVjdCIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJ1cGRhdGVVc2VySW5mbyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlQXZhdGFyIiwiZ2V0SW5pdGlhbENhcmRzIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImdldEFwcERhdGEiLCJhbGwiLCJhdXRob3JpemF0aW9uIiwiY2FyZERhdGEiLCJDYXJkIiwiaW1hZ2VQb3B1cCIsIl9pbWFnZU1vZGFsUGljdHVyZSIsIl9pbWFnZU1vZGFsVGl0bGUiLCJ1c2VySW5mbyIsIl9yZWYiLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfYWJvdXRFbGVtZW50IiwiX2F2YXRhckVsZW1lbnQiLCJhYm91dCIsImF2YXRhciIsInNldFVzZXJBdmF0YXIiLCJhdmF0YXJVcmwiLCJzZXRVc2VySW5mbyIsIl9yZWYyIiwicHJvZmlsZVBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsInVzZXJEYXRhIiwiZmluYWxseSIsImFkZENhcmRQb3B1cCIsImNhcmRFbGVtZW50IiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwiYXZhdGFyUG9wdXAiLCJjYXJkIiwiX2NhcmQiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJwb3NpdGlvbiIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInVzZXIiLCJjYXJkcyIsImdyZWV0aW5nQ2FyZCIsImZpbmQiLCJyZW1haW5pbmdDYXJkcyIsImZpbHRlciIsImxvZyIsImZvcm1WYWxpZGF0b3JzIiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwidmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==